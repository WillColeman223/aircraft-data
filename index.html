<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Flights Dashboard</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f0f0; margin: 0; padding: 20px; }
  h1 { text-align: center; margin-bottom: 20px; }
  .grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
  .flight-box {
    background: #fff; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    width: 180px; text-align: center; padding: 10px; transition: transform 0.2s;
  }
  .flight-box:hover { transform: scale(1.05); }
  .flight-img { width: 100%; height: auto; border-radius: 5px; }
  .callsign { font-weight: bold; margin: 5px 0; }
  .reg { color: #555; font-size: 0.9em; margin-bottom: 5px; }
  .link { display: block; margin-top: 5px; color: #0077cc; text-decoration: none; font-size: 0.85em; }
  .link:hover { text-decoration: underline; }
</style>
</head>
<body>

<h1>Live Flights Dashboard</h1>
<div id="flights" class="grid"></div>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbyP5QTx4pkWYiwW5cSYGpb_JondOQvVlDDFLlgu8yZpt5QzT6-xjw6XiI8Yvd0BdnE/exec";

// Placeholder image
function getPlaneImage(registration) {
    return registration ? `https://via.placeholder.com/150?text=${registration}` : "https://via.placeholder.com/150?text=Plane";
}

// FlightRadar24 link
function getFlightRadarLink(callsign) {
    return callsign ? `https://www.flightradar24.com/data/flights/${callsign}` : "#";
}

// JetPhotos link
function getJetPhotosLink(registration) {
    return registration ? `https://www.jetphotos.com/photo/aircraft?registration=${registration}` : "#";
}

// Load and display flights
async function loadFlights() {
    try {
        const response = await fetch(SHEET_URL);
        const data = await response.json();
        const container = document.getElementById("flights");
        container.innerHTML = "";

        data.forEach(flight => {
            const box = document.createElement("div");
            box.className = "flight-box";

            const img = document.createElement("img");
            img.src = getPlaneImage(flight.registration);
            img.alt = flight.callsign;
            img.className = "flight-img";

            const callsign = document.createElement("div");
            callsign.className = "callsign";
            callsign.textContent = flight.callsign || "N/A";

            const reg = document.createElement("div");
            reg.className = "reg";
            reg.textContent = flight.registration || "Unknown";

            const frLink = document.createElement("a");
            frLink.href = getFlightRadarLink(flight.callsign);
            frLink.target = "_blank";
            frLink.className = "link";
            frLink.textContent = "View on FlightRadar24";

            const jpLink = document.createElement("a");
            jpLink.href = getJetPhotosLink(flight.registration);
            jpLink.target = "_blank";
            jpLink.className = "link";
            jpLink.textContent = "View JetPhotos";

            box.appendChild(img);
            box.appendChild(callsign);
            box.appendChild(reg);
            box.appendChild(frLink);
            box.appendChild(jpLink);

            container.appendChild(box);
        });

    } catch(err) {
        console.error("Failed to load flights:", err);
    }
}

// Refresh every 60 seconds
loadFlights();
setInterval(loadFlights, 60000);
</script>

</body>
</html>

